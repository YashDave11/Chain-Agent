name: chainagent-indexer
description: ChainAgent DCA Automation Event Indexer
repository: https://github.com/chainagent/indexer
networks:
  - id: 11155111 # Sepolia
    start_block: 0
    contracts:
      - name: CoordinatorAgent
        address:
          - 0x7B3227C2337672EEbEd0fe0616Ecd3796c6a6F1De
        handler: src/EventHandlers.ts
        events:
          - event: PermissionReceived(address indexed user, address indexed token, uint256 dailyLimit, uint256 totalLimit, uint256 duration, uint256 targetDipBps)
          - event: SubDelegationIssued(address indexed user, address indexed executor, uint256 dailyLimit)
          - event: ExecutionTriggered(address indexed user, address indexed executor, uint256 amount, uint256 price)
          - event: PermissionRevoked(address indexed user)
          - event: DelegationRevoked(address indexed user, address indexed executor)
      - name: ExecutionAgent
        address:
          - 0x594bD38FC2d9b9bdEaD9B3D24e29f0B0F1E0BB87
        handler: src/EventHandlers.ts
        events:
          - event: SwapExecuted(address indexed user, address indexed tokenIn, address indexed tokenOut, uint256 amountIn, uint256 amountOut, uint256 price)
          - event: QuotaExceeded(address indexed user, uint256 requested, uint256 available)
          - event: EmergencyWithdraw(address indexed token, uint256 amount)
      - name: MockPriceOracle
        address:
          - 0x11aa01e0d27FD26aed1d7A82A4c25433ee9de3AA
        handler: src/EventHandlers.ts
        events:
          - event: PriceUpdated(address indexed token, uint256 oldPrice, uint256 newPrice)
          - event: OwnershipTransferred(address indexed previousOwner, address indexed newOwner)
